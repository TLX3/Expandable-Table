//  Generate markup for rows here

// User inputs data set and keys to expandable row by layer
let numOfLayers = 3;
let childKeys = ['children1', 'children2', 'children3'];
let dataSet =[
{
  "_id": "598e09bbef4207e627d1b994",
  "index": 0,
  "guid": "47ab84c9-b3ea-4eb0-b966-77b170ed966f",
  "isActive": false,
  "balance": "$1,440.21",
  "age": 25,
  "eyeColor": "green",
  "company": "GLUKGLUK",
  "phone": "+1 (927) 510-3190",
  "address": "753 Rutland Road, Harviell, Tennessee, 6565",
  "about": "Sit esse aliquip labore elit. Irure ea elit do aliquip officia consectetur ullamco deserunt. Pariatur commodo cillum sunt laborum esse. Duis labore laboris excepteur do sit voluptate ut laborum nisi voluptate.",
  "registered": "Wednesday, October 5, 2016 7:26 PM",
  "latitude": "38.863664",
  "longitude": "105.108726",
  "range": [
  0,
  1,
  2,
  3,
  4,
  5,
  6,
  7,
  8,
  9
  ],
  "children1": [
  {
    "_id": "598e09bbbfd7f1354789124a",
    "index": 0,
    "guid": "3c4f189c-9938-4597-9b7e-fb33e7dd5702",
    "isActive": false,
    "balance": "$2,107.67",
    "age": 35,
    "eyeColor": "brown",
    "company": "SONIQUE",
    "phone": "+1 (997) 531-3983",
    "address": "163 Fayette Street, Oberlin, Arkansas, 288",
    "about": "Duis duis cupidatat id exercitation cupidatat nisi incididunt. Laboris nulla ex esse dolore sint quis Lorem. Fugiat qui sit aliqua in laborum tempor deserunt proident eiusmod magna consectetur minim excepteur exercitation. Sit excepteur magna ipsum deserunt voluptate. Ea proident sint aliqua aute labore nostrud ullamco in.",
    "registered": "Sunday, September 13, 2015 3:13 AM",
    "latitude": "-22.055838",
    "longitude": "-37.167537",
    "range": [
    0,
    1,
    2,
    3,
    4,
    5,
    6,
    7,
    8,
    9
    ],
    "children2": [
    {
      "_id": "598e09bbcc4c7c7c1ec34efb",
      "index": 0,
      "guid": "75bfbcd6-09c6-4362-b981-45f99d774e0a",
      "isActive": false,
      "balance": "$2,793.43",
      "age": 37,
      "eyeColor": "green",
      "company": "LIMAGE",
      "phone": "+1 (921) 425-2069",
      "address": "483 Claver Place, Nettie, Wisconsin, 9545",
      "about": "Proident sit sunt deserunt tempor est ipsum sint culpa voluptate cillum. Consectetur incididunt ea enim aliqua dolore excepteur laboris nostrud laborum consectetur exercitation amet eu ipsum. Non magna amet magna voluptate ex fugiat culpa nostrud deserunt commodo dolor nostrud culpa non. Proident minim minim velit aliqua deserunt excepteur deserunt irure minim est incididunt cillum duis.",
      "registered": "Thursday, November 20, 2014 12:15 AM",
      "latitude": "-3.22995",
      "longitude": "61.718277",
      "range": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9
      ],
      "children3": [
      {
        "_id": "598e09bb33aadf7cbb2c3a53",
        "index": 0,
        "guid": "a0a7dc09-ebf0-484f-9258-a713ebb281cf",
        "isActive": false,
        "balance": "$2,618.56",
        "age": 36,
        "eyeColor": "green",
        "company": "SCHOOLIO",
        "phone": "+1 (991) 535-3313",
        "address": "963 Bradford Street, Norris, Alabama, 7447",
        "about": "Ex ex nisi irure enim nisi culpa consequat. Sint laboris officia do laboris mollit elit magna sunt cillum eu nostrud eu duis labore. Pariatur elit consequat anim est consequat aliquip velit voluptate labore ut exercitation occaecat dolore.",
        "registered": "Wednesday, May 20, 2015 4:53 PM",
        "latitude": "85.54283",
        "longitude": "27.210492",
        "range": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
        ]
      }
      ]
    }
    ]
  }
  ]
},
{
  "_id": "598e09bbc0befce9b1b1bb3a",
  "index": 1,
  "guid": "6f5e8018-54fd-4762-b6b9-2997f3c9f391",
  "isActive": true,
  "balance": "$1,124.72",
  "age": 35,
  "eyeColor": "brown",
  "company": "SULFAX",
  "phone": "+1 (955) 440-3164",
  "address": "294 Covert Street, Bluetown, Nevada, 1052",
  "about": "Anim veniam pariatur incididunt dolor exercitation et consequat tempor elit. Sunt exercitation sit eu elit ipsum nisi commodo. Do ullamco sunt mollit ut sit sint exercitation voluptate nulla consequat. Cillum amet voluptate labore ipsum incididunt qui esse ullamco id deserunt magna. Dolor non officia aliqua cupidatat elit ex ex pariatur. Proident sit laboris culpa nostrud deserunt esse non reprehenderit sit officia id veniam consequat.",
  "registered": "Friday, February 27, 2015 3:15 AM",
  "latitude": "78.368691",
  "longitude": "-82.719682",
  "range": [
  0,
  1,
  2,
  3,
  4,
  5,
  6,
  7,
  8,
  9
  ],
  "children1": [
  {
    "_id": "598e09bbf639713cdf22130b",
    "index": 0,
    "guid": "673359e4-68a2-43f3-ad7f-96adc1068bd7",
    "isActive": true,
    "balance": "$1,600.89",
    "age": 40,
    "eyeColor": "brown",
    "company": "RETROTEX",
    "phone": "+1 (865) 462-2019",
    "address": "935 Cropsey Avenue, Gadsden, Oklahoma, 4398",
    "about": "Elit ipsum tempor consequat velit aute adipisicing eiusmod esse. Pariatur cillum sint ad dolor consectetur. Anim mollit adipisicing anim ex. Ex ea incididunt do enim amet duis ipsum. Lorem enim consequat quis cupidatat enim non velit pariatur veniam elit. Esse aliqua incididunt non do laborum veniam.",
    "registered": "Wednesday, November 16, 2016 2:32 AM",
    "latitude": "64.344604",
    "longitude": "82.222642",
    "range": [
    0,
    1,
    2,
    3,
    4,
    5,
    6,
    7,
    8,
    9
    ],
    "children2": [
    {
      "_id": "598e09bb2d78490ea13f22a0",
      "index": 0,
      "guid": "ece9c8a6-2913-41fd-b0c6-8dc668f29546",
      "isActive": true,
      "balance": "$1,201.55",
      "age": 38,
      "eyeColor": "green",
      "company": "ZOLAR",
      "phone": "+1 (847) 496-3670",
      "address": "688 Conover Street, Draper, Washington, 3509",
      "about": "Irure aliqua sit labore irure laboris in anim aliqua aliquip. Culpa pariatur voluptate dolore labore proident irure tempor dolor incididunt adipisicing veniam labore. Anim ullamco elit proident non elit elit consequat sit anim. Qui minim aliqua cupidatat duis id irure labore eiusmod dolore ea cillum reprehenderit commodo. Qui enim ullamco nulla cillum mollit minim aliqua fugiat.",
      "registered": "Monday, November 24, 2014 7:31 AM",
      "latitude": "-53.155925",
      "longitude": "-103.548846",
      "range": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9
      ],
      "children3": [
      {
        "_id": "598e09bb7cafc9cab1accf6f",
        "index": 0,
        "guid": "ec5730a1-6fca-4ce0-a9d3-99e3cdd0657b",
        "isActive": false,
        "balance": "$3,973.59",
        "age": 22,
        "eyeColor": "brown",
        "company": "EVIDENDS",
        "phone": "+1 (933) 500-2122",
        "address": "240 Dupont Street, Ezel, Delaware, 6008",
        "about": "Ut exercitation ipsum et ipsum exercitation tempor sint irure ut exercitation esse culpa excepteur. Cupidatat do ullamco laboris dolore et enim amet culpa proident veniam proident amet. Et duis labore consequat enim aliquip exercitation.",
        "registered": "Friday, December 19, 2014 6:46 AM",
        "latitude": "79.12014",
        "longitude": "-45.22837",
        "range": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
        ]
      }
      ]
    }
    ]
  }
  ]
},
{
  "_id": "598e09bbe81bc18f9c11c592",
  "index": 2,
  "guid": "cc005d73-9a6c-4deb-a291-42991b62145b",
  "isActive": true,
  "balance": "$1,196.62",
  "age": 34,
  "eyeColor": "brown",
  "company": "ZEAM",
  "phone": "+1 (819) 450-3187",
  "address": "369 Independence Avenue, Cornfields, Vermont, 7694",
  "about": "Aliqua laborum qui sunt laborum aliqua eu fugiat nulla duis enim aliquip exercitation nisi. Aute eiusmod non incididunt ex officia reprehenderit et Lorem commodo. Velit adipisicing occaecat laboris est est culpa ut cillum amet cillum. Enim aute duis duis laboris quis enim.",
  "registered": "Saturday, August 8, 2015 9:42 PM",
  "latitude": "-69.729916",
  "longitude": "123.730606",
  "range": [
  0,
  1,
  2,
  3,
  4,
  5,
  6,
  7,
  8,
  9
  ],
  "children1": [
  {
    "_id": "598e09bbcde53647f545e220",
    "index": 0,
    "guid": "3067c651-b67d-4618-b798-38af8d98c6f0",
    "isActive": true,
    "balance": "$1,389.49",
    "age": 30,
    "eyeColor": "brown",
    "company": "ASSISTIA",
    "phone": "+1 (858) 510-3825",
    "address": "690 Pilling Street, Cloverdale, Ohio, 9116",
    "about": "Officia ad in officia dolor mollit eiusmod mollit adipisicing nulla. Irure ad ex voluptate consectetur. Eiusmod nisi voluptate voluptate ullamco occaecat irure eiusmod elit magna laboris laboris nisi Lorem qui. Elit Lorem ad excepteur consectetur. Id sit et nulla cillum. Anim ad nostrud proident nostrud aliqua magna nostrud amet ut est deserunt. Irure sit sint quis esse aliqua ullamco aliquip in.",
    "registered": "Friday, January 16, 2015 10:04 AM",
    "latitude": "-84.921187",
    "longitude": "45.266531",
    "range": [
    0,
    1,
    2,
    3,
    4,
    5,
    6,
    7,
    8,
    9
    ],
    "children2": [
    {
      "_id": "598e09bb0e760ec83448c3e9",
      "index": 0,
      "guid": "fe91ec4a-12b6-4b31-b971-a124e7ba6bba",
      "isActive": true,
      "balance": "$1,251.33",
      "age": 39,
      "eyeColor": "brown",
      "company": "COWTOWN",
      "phone": "+1 (926) 592-3802",
      "address": "332 Ludlam Place, Wakarusa, Texas, 2187",
      "about": "Irure sunt incididunt cupidatat minim sint nostrud ad. Velit proident sit consectetur esse mollit nulla laborum ipsum. Labore esse non elit ipsum proident esse amet proident.",
      "registered": "Thursday, November 13, 2014 7:02 AM",
      "latitude": "-0.207983",
      "longitude": "-44.544727",
      "range": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9
      ],
      "children3": [
      {
        "_id": "598e09bb6b7aa11900f08903",
        "index": 0,
        "guid": "f5c10ae0-6a98-4702-ba2b-5d34dcefbc49",
        "isActive": false,
        "balance": "$1,719.70",
        "age": 35,
        "eyeColor": "blue",
        "company": "QUARMONY",
        "phone": "+1 (915) 505-2581",
        "address": "749 Gerry Street, Healy, New Mexico, 7599",
        "about": "Quis aute cillum cillum laborum occaecat aute pariatur non nulla ex esse et qui quis. Esse Lorem non magna eu sit aute anim eu cupidatat fugiat eu nisi nisi. Sunt magna eiusmod excepteur duis consectetur cupidatat exercitation consequat sit. Adipisicing est nulla do officia duis. Reprehenderit irure id voluptate sint nulla consequat et.",
        "registered": "Thursday, May 21, 2015 10:00 AM",
        "latitude": "48.800842",
        "longitude": "-10.713188",
        "range": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
        ]
      }
      ]
    }
    ]
  }
  ]
},
{
  "_id": "598e09bbb393e43b85a14489",
  "index": 3,
  "guid": "ce349bcc-6798-4429-a3ba-44e8e7c287a3",
  "isActive": true,
  "balance": "$2,168.21",
  "age": 29,
  "eyeColor": "green",
  "company": "EQUITOX",
  "phone": "+1 (898) 428-2072",
  "address": "615 Harbor Court, Titanic, Kansas, 7040",
  "about": "Enim non nostrud commodo consequat non reprehenderit anim culpa nisi non excepteur. Adipisicing consectetur reprehenderit est quis qui cillum dolore reprehenderit ullamco. Ullamco Lorem qui id consectetur consequat nostrud.",
  "registered": "Wednesday, May 27, 2015 8:33 AM",
  "latitude": "-69.300455",
  "longitude": "-63.120286",
  "range": [
  0,
  1,
  2,
  3,
  4,
  5,
  6,
  7,
  8,
  9
  ],
  "children1": [
  {
    "_id": "598e09bb9fde2110e732be9a",
    "index": 0,
    "guid": "d79337ed-bf8d-4530-aab2-97e74fc2cac5",
    "isActive": true,
    "balance": "$3,162.24",
    "age": 22,
    "eyeColor": "blue",
    "company": "SAVVY",
    "phone": "+1 (933) 552-2391",
    "address": "153 Gallatin Place, Brownsville, Utah, 9959",
    "about": "Laboris enim dolore excepteur Lorem magna non enim cupidatat proident voluptate. Consectetur commodo duis irure commodo qui sint magna non sint laboris. Ullamco fugiat dolor enim irure ex cupidatat amet do mollit labore fugiat ipsum adipisicing.",
    "registered": "Tuesday, September 23, 2014 3:39 PM",
    "latitude": "-3.594263",
    "longitude": "27.265581",
    "range": [
    0,
    1,
    2,
    3,
    4,
    5,
    6,
    7,
    8,
    9
    ],
    "children2": [
    {
      "_id": "598e09bb66c330410a6260ea",
      "index": 0,
      "guid": "559d07b1-6fe1-4f93-af56-e54604813c93",
      "isActive": true,
      "balance": "$3,194.73",
      "age": 21,
      "eyeColor": "green",
      "company": "CENTREXIN",
      "phone": "+1 (936) 415-2426",
      "address": "211 Broadway , Emory, Maine, 5850",
      "about": "Laborum ex fugiat Lorem duis nostrud magna nisi aliqua ipsum ipsum. Nisi irure nulla commodo magna anim qui anim nisi labore sit est veniam. Officia esse voluptate nulla irure voluptate officia reprehenderit sunt aliqua eu tempor nulla consequat deserunt. Aliquip eiusmod irure ipsum ut dolore laboris sunt cillum enim ut veniam nulla pariatur quis. Proident irure sint incididunt sint sunt aliquip laborum nulla ut ea nulla velit ea proident.",
      "registered": "Saturday, June 10, 2017 12:36 PM",
      "latitude": "86.84619",
      "longitude": "142.937506",
      "range": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9
      ],
      "children3": [
      {
        "_id": "598e09bbcd6e409f8c2d54d7",
        "index": 0,
        "guid": "b4fd4f3a-61e2-452e-9fd0-62b2cd724c21",
        "isActive": true,
        "balance": "$2,947.57",
        "age": 35,
        "eyeColor": "blue",
        "company": "MAXEMIA",
        "phone": "+1 (827) 487-3380",
        "address": "790 Delevan Street, Keyport, South Carolina, 9760",
        "about": "Commodo nulla magna ex dolor id proident culpa culpa proident dolor aute. Cillum tempor elit elit anim est dolor. Minim anim tempor minim aute elit et qui ut incididunt voluptate. Nostrud excepteur dolor ex in irure commodo fugiat qui nulla dolor.",
        "registered": "Friday, December 30, 2016 5:09 AM",
        "latitude": "60.52086",
        "longitude": "-59.003482",
        "range": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
        ]
      }
      ]
    }
    ]
  }
  ]
},
{
  "_id": "598e09bb9df9c1d50d94bcd5",
  "index": 4,
  "guid": "e5272225-8b64-4b02-9002-09bfa1dc9378",
  "isActive": false,
  "balance": "$2,979.85",
  "age": 23,
  "eyeColor": "blue",
  "company": "SUPREMIA",
  "phone": "+1 (849) 589-3769",
  "address": "445 Charles Place, Goodville, Minnesota, 9459",
  "about": "Velit commodo elit Lorem occaecat in occaecat aliqua ad ea voluptate laboris duis eiusmod irure. Est dolor fugiat aliqua amet laborum officia reprehenderit ullamco dolor consequat. In magna id cupidatat dolor enim ea do fugiat dolor aute deserunt pariatur nisi. Veniam tempor duis magna dolore sint commodo ex veniam ea cupidatat. Ad nostrud anim aute proident. Incididunt esse non sint minim nisi sit sint. Ullamco ut officia culpa dolor in ullamco ut incididunt.",
  "registered": "Saturday, October 24, 2015 10:07 AM",
  "latitude": "-45.233654",
  "longitude": "-32.046256",
  "range": [
  0,
  1,
  2,
  3,
  4,
  5,
  6,
  7,
  8,
  9
  ],
  "children1": [
  {
    "_id": "598e09bbe7c6559d068f0686",
    "index": 0,
    "guid": "3c39a790-6793-4331-a90a-884f0c69fdc6",
    "isActive": true,
    "balance": "$3,331.83",
    "age": 24,
    "eyeColor": "brown",
    "company": "EXOPLODE",
    "phone": "+1 (951) 529-2845",
    "address": "597 Maple Avenue, Mulino, Federated States Of Micronesia, 1557",
    "about": "Consectetur culpa dolore eu minim esse id eu sunt nisi enim incididunt. Elit officia reprehenderit incididunt anim qui duis Lorem magna. Velit minim occaecat proident elit adipisicing magna anim aliquip dolor Lorem ea tempor. Aliqua laborum proident ex dolor cillum aliquip voluptate incididunt ipsum commodo.",
    "registered": "Thursday, September 15, 2016 3:31 AM",
    "latitude": "-67.036734",
    "longitude": "-116.521747",
    "range": [
    0,
    1,
    2,
    3,
    4,
    5,
    6,
    7,
    8,
    9
    ],
    "children2": [
    {
      "_id": "598e09bbd142a8061eb9ab47",
      "index": 0,
      "guid": "00526e22-5bce-478a-8371-fcd88a180b72",
      "isActive": true,
      "balance": "$3,539.62",
      "age": 35,
      "eyeColor": "green",
      "company": "NETPLODE",
      "phone": "+1 (919) 597-2786",
      "address": "340 Tampa Court, Berlin, Georgia, 2079",
      "about": "Ad cupidatat officia qui elit. Elit aute mollit ex culpa est ullamco ullamco do. Veniam aliqua nostrud ullamco do exercitation proident consectetur magna et nisi. Laborum fugiat aliqua pariatur tempor nostrud ea minim ex non dolor.",
      "registered": "Saturday, November 22, 2014 12:21 AM",
      "latitude": "-76.618055",
      "longitude": "-0.532777",
      "range": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9
      ],
      "children3": [
      {
        "_id": "598e09bb74d1ac61fc8f31eb",
        "index": 0,
        "guid": "c9032e4f-f08b-4c08-8ae8-0172bed8c1df",
        "isActive": false,
        "balance": "$1,897.42",
        "age": 23,
        "eyeColor": "blue",
        "company": "INTRADISK",
        "phone": "+1 (985) 560-3950",
        "address": "454 Stillwell Place, Valle, Florida, 6892",
        "about": "Non ad id ullamco quis elit. Aute sit et aute esse laboris cupidatat. Do veniam ex nostrud ad adipisicing culpa laborum elit eiusmod labore ipsum. Ea incididunt quis reprehenderit fugiat enim sint tempor sunt sint ea. Laborum ad voluptate laboris sit quis consectetur duis non laborum in consequat eiusmod.",
        "registered": "Saturday, December 3, 2016 5:20 AM",
        "latitude": "81.49567",
        "longitude": "74.935944",
        "range": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
        ]
      }
      ]
    }
    ]
  }
  ]
},
{
  "_id": "598e09bb3ebbb11c981e4400",
  "index": 5,
  "guid": "5ef04a24-4ce8-41c4-806e-eb6aae92adec",
  "isActive": false,
  "balance": "$1,551.43",
  "age": 36,
  "eyeColor": "brown",
  "company": "SPACEWAX",
  "phone": "+1 (878) 449-3999",
  "address": "612 Barlow Drive, Williston, South Dakota, 9559",
  "about": "Adipisicing do incididunt voluptate eu id eiusmod elit adipisicing eu sit aute magna. Laborum laborum enim cillum irure amet qui consectetur. Non ut est id reprehenderit et qui quis eiusmod exercitation sint mollit proident. Est voluptate aliquip eiusmod in excepteur Lorem Lorem laborum minim fugiat laborum ut. Non excepteur cillum exercitation laboris consectetur laboris.",
  "registered": "Saturday, June 11, 2016 8:17 AM",
  "latitude": "-81.041882",
  "longitude": "-24.032005",
  "range": [
  0,
  1,
  2,
  3,
  4,
  5,
  6,
  7,
  8,
  9
  ],
  "children1": [
  {
    "_id": "598e09bba7e134b6008185c3",
    "index": 0,
    "guid": "99f0b961-7968-46cf-a502-2eb973e0fe9e",
    "isActive": true,
    "balance": "$3,743.82",
    "age": 34,
    "eyeColor": "green",
    "company": "EARWAX",
    "phone": "+1 (824) 424-2246",
    "address": "245 Gardner Avenue, Ryderwood, Connecticut, 5052",
    "about": "Duis velit consectetur sint enim esse. Nostrud pariatur enim incididunt adipisicing voluptate cupidatat consequat eu deserunt ex fugiat. Cillum eu sint tempor aute Lorem enim occaecat consectetur. Consectetur anim minim esse deserunt laborum et elit culpa qui irure quis tempor irure. Anim et nisi Lorem ea consequat ad laborum nisi dolore. Amet eu anim nostrud proident ullamco ex ipsum dolor mollit Lorem officia adipisicing elit. Exercitation pariatur culpa nostrud enim do culpa officia non.",
    "registered": "Thursday, July 24, 2014 3:04 AM",
    "latitude": "-34.835471",
    "longitude": "158.910994",
    "range": [
    0,
    1,
    2,
    3,
    4,
    5,
    6,
    7,
    8,
    9
    ],
    "children2": [
    {
      "_id": "598e09bb61cd81db43a25293",
      "index": 0,
      "guid": "48d9da71-d9b8-4ecc-a3d0-28fe6b282b62",
      "isActive": true,
      "balance": "$2,383.96",
      "age": 37,
      "eyeColor": "green",
      "company": "UNI",
      "phone": "+1 (961) 552-3445",
      "address": "421 Quentin Road, Connerton, Alaska, 2635",
      "about": "Veniam et commodo qui pariatur est sint nulla duis. Officia cillum sint ea non do exercitation ex et cillum sunt laborum incididunt pariatur incididunt. Magna amet excepteur laborum adipisicing anim tempor. Irure cupidatat occaecat adipisicing nulla consectetur non sit sit nostrud tempor exercitation mollit. Ex sit cupidatat culpa incididunt sint fugiat in aliqua fugiat nisi magna aliquip magna. Pariatur qui sunt laborum ex voluptate occaecat veniam in qui qui ipsum.",
      "registered": "Thursday, February 11, 2016 5:59 PM",
      "latitude": "-81.67701",
      "longitude": "179.797725",
      "range": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9
      ],
      "children3": [
      {
        "_id": "598e09bbb8948cc5cf4c8927",
        "index": 0,
        "guid": "b3f71964-f159-4227-b514-6245948900af",
        "isActive": true,
        "balance": "$3,561.71",
        "age": 29,
        "eyeColor": "brown",
        "company": "PEARLESSA",
        "phone": "+1 (810) 444-2907",
        "address": "397 Tapscott Street, Sparkill, Hawaii, 373",
        "about": "Ad adipisicing aute esse labore non commodo deserunt mollit duis nulla ut esse consectetur. Lorem nostrud nostrud enim veniam amet tempor aute. Lorem mollit velit nulla id amet. Reprehenderit et culpa laborum quis ipsum adipisicing aliqua cupidatat Lorem deserunt. Incididunt dolor elit magna deserunt esse sint amet. Nulla est deserunt voluptate Lorem mollit.",
        "registered": "Saturday, September 17, 2016 5:22 PM",
        "latitude": "83.850939",
        "longitude": "152.221404",
        "range": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
        ]
      }
      ]
    }
    ]
  }
  ]
},
{
  "_id": "598e09bb492d7d68a315bba0",
  "index": 6,
  "guid": "90703822-c65d-407e-9bc6-fe8e22616fd0",
  "isActive": false,
  "balance": "$3,036.34",
  "age": 24,
  "eyeColor": "blue",
  "company": "INJOY",
  "phone": "+1 (984) 439-2203",
  "address": "387 Clermont Avenue, Nile, Missouri, 8509",
  "about": "Lorem ipsum magna sit culpa proident ullamco fugiat do ipsum proident quis commodo aliquip cillum. Est sit id Lorem magna ea duis excepteur elit irure in. Tempor exercitation pariatur ad eu esse tempor ex qui officia amet qui sit labore. Consectetur laboris elit deserunt ullamco fugiat aliquip in tempor anim anim labore. Ipsum reprehenderit et ipsum irure dolore.",
  "registered": "Sunday, November 23, 2014 12:48 AM",
  "latitude": "-35.843557",
  "longitude": "49.977938",
  "range": [
  0,
  1,
  2,
  3,
  4,
  5,
  6,
  7,
  8,
  9
  ],
  "children1": [
  {
    "_id": "598e09bb598efb44aad4e39b",
    "index": 0,
    "guid": "3706630d-4d02-4f0d-b097-3b903055a12c",
    "isActive": true,
    "balance": "$1,407.46",
    "age": 20,
    "eyeColor": "green",
    "company": "FURNITECH",
    "phone": "+1 (859) 528-2762",
    "address": "883 Court Square, Cornucopia, Iowa, 834",
    "about": "In esse irure aliqua culpa aliqua qui ipsum est deserunt non pariatur. Magna Lorem fugiat duis cupidatat cillum sunt duis culpa. Adipisicing ad ex proident dolore eu sit nisi fugiat velit deserunt do aliqua Lorem.",
    "registered": "Monday, January 26, 2015 2:17 AM",
    "latitude": "70.999404",
    "longitude": "-115.540011",
    "range": [
    0,
    1,
    2,
    3,
    4,
    5,
    6,
    7,
    8,
    9
    ],
    "children2": [
    {
      "_id": "598e09bbff3efe4e8647a6c5",
      "index": 0,
      "guid": "44a19a66-712c-4a1e-be50-b8e1344cef2b",
      "isActive": true,
      "balance": "$1,077.44",
      "age": 33,
      "eyeColor": "green",
      "company": "CUBICIDE",
      "phone": "+1 (917) 447-2483",
      "address": "758 Surf Avenue, Leming, Virginia, 3214",
      "about": "Lorem id proident ut in nulla labore commodo et. Consectetur aliqua irure elit occaecat officia ut aliqua eu est aliqua officia eu non qui. Officia aute sint mollit et amet reprehenderit cillum enim ea enim consectetur nostrud. Eiusmod minim et qui proident tempor adipisicing. Incididunt amet eiusmod anim culpa incididunt dolor proident Lorem. Laborum officia laborum incididunt qui ea consectetur Lorem irure aliquip excepteur elit.",
      "registered": "Wednesday, October 26, 2016 6:20 PM",
      "latitude": "51.507809",
      "longitude": "0.50861",
      "range": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9
      ],
      "children3": [
      {
        "_id": "598e09bb52ad393bce17fde4",
        "index": 0,
        "guid": "349c774e-3682-492c-9ac6-4f4d91fe4cca",
        "isActive": false,
        "balance": "$3,515.25",
        "age": 27,
        "eyeColor": "blue",
        "company": "ENAUT",
        "phone": "+1 (957) 436-2146",
        "address": "654 Cortelyou Road, Bloomington, Oregon, 1665",
        "about": "Non ipsum qui esse eiusmod aute ea dolore officia mollit magna voluptate. Quis ipsum deserunt do reprehenderit do enim dolor esse et non ipsum culpa pariatur. Commodo nisi ipsum ea commodo deserunt aliqua labore et nisi et. Nostrud non officia nisi veniam anim duis veniam veniam occaecat. Cillum ut Lorem irure commodo sit magna dolor. Laboris et magna commodo duis enim nulla eiusmod cillum.",
        "registered": "Sunday, May 8, 2016 9:51 PM",
        "latitude": "2.903842",
        "longitude": "-36.574564",
        "range": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
        ]
      }
      ]
    }
    ]
  }
  ]
},
{
  "_id": "598e09bbfc77d86fd61ebd62",
  "index": 7,
  "guid": "9ece5e7d-2972-4a01-95fd-4fca3f523aa8",
  "isActive": false,
  "balance": "$2,766.77",
  "age": 25,
  "eyeColor": "green",
  "company": "FUTURIZE",
  "phone": "+1 (925) 451-2086",
  "address": "184 Alton Place, Tilden, New York, 2662",
  "about": "Officia veniam nostrud sint nulla elit in. Sint minim cillum anim dolor quis dolor. Ullamco velit sint eu velit nisi tempor consequat nulla officia ea. Sit mollit ad labore duis eiusmod. Esse culpa eu non exercitation incididunt ad labore voluptate labore reprehenderit sunt sint voluptate. Consequat ad aliquip aute fugiat ipsum incididunt commodo.",
  "registered": "Thursday, September 11, 2014 2:48 AM",
  "latitude": "-74.613995",
  "longitude": "88.531314",
  "range": [
  0,
  1,
  2,
  3,
  4,
  5,
  6,
  7,
  8,
  9
  ],
  "children1": [
  {
    "_id": "598e09bb012d6c60788731dc",
    "index": 0,
    "guid": "3454b1ea-b58b-4597-9f1f-6bf203f2cb8a",
    "isActive": true,
    "balance": "$2,613.23",
    "age": 25,
    "eyeColor": "brown",
    "company": "EXPOSA",
    "phone": "+1 (984) 531-2705",
    "address": "656 Hutchinson Court, Orovada, Louisiana, 5733",
    "about": "Do ea deserunt id est labore voluptate dolore dolor in tempor veniam reprehenderit. Consectetur velit ut tempor commodo laboris consectetur deserunt quis. Adipisicing esse et cillum sunt qui commodo aute anim eu ea dolor sit. Amet veniam anim in aliqua excepteur magna aliqua elit nostrud adipisicing magna esse. Qui nulla id adipisicing mollit consequat proident ea aliquip consequat pariatur cillum dolore.",
    "registered": "Saturday, November 12, 2016 12:00 PM",
    "latitude": "45.314232",
    "longitude": "92.576698",
    "range": [
    0,
    1,
    2,
    3,
    4,
    5,
    6,
    7,
    8,
    9
    ],
    "children2": [
    {
      "_id": "598e09bbb927ef0563005444",
      "index": 0,
      "guid": "08cd1748-c910-4f5c-9b25-c6476ee7bc1e",
      "isActive": true,
      "balance": "$1,130.52",
      "age": 24,
      "eyeColor": "green",
      "company": "COMVENE",
      "phone": "+1 (833) 485-2464",
      "address": "628 Ashland Place, Springhill, Virgin Islands, 9285",
      "about": "Elit amet officia consectetur elit aliquip laborum aliqua voluptate ipsum. Ut anim quis enim ea Lorem aliqua elit fugiat enim enim proident aliqua velit dolor. Reprehenderit tempor minim nulla consequat commodo in id deserunt adipisicing cupidatat. Nulla id aute commodo aliqua laboris incididunt laborum sit nostrud nulla duis dolor et anim. Ad cillum veniam culpa dolor mollit sint et quis dolor magna. Irure consequat reprehenderit laboris cillum dolor aliquip ipsum ex culpa nostrud sit dolore sunt.",
      "registered": "Monday, December 29, 2014 3:10 AM",
      "latitude": "33.632866",
      "longitude": "98.868661",
      "range": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9
      ],
      "children3": [
      {
        "_id": "598e09bbfb81f6621c71ca99",
        "index": 0,
        "guid": "eec3facb-a18e-4261-931f-ce841b57bee0",
        "isActive": true,
        "balance": "$3,601.57",
        "age": 27,
        "eyeColor": "blue",
        "company": "ZOLAVO",
        "phone": "+1 (934) 551-2243",
        "address": "138 Shale Street, Soham, Marshall Islands, 3053",
        "about": "Lorem esse ut laborum duis Lorem et. Aliquip ipsum eu in aliqua consequat amet laboris veniam incididunt id amet tempor. Duis elit mollit reprehenderit excepteur eiusmod ad cupidatat in anim laboris. Cillum sunt qui et amet magna incididunt minim ea nostrud incididunt.",
        "registered": "Tuesday, November 4, 2014 10:15 AM",
        "latitude": "-7.290894",
        "longitude": "-76.440666",
        "range": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
        ]
      }
      ]
    }
    ]
  }
  ]
},
{
  "_id": "598e09bb8afc2f8fd3d057cf",
  "index": 8,
  "guid": "6c579b9b-9e00-47a8-a354-53607ddce3d0",
  "isActive": true,
  "balance": "$1,411.88",
  "age": 35,
  "eyeColor": "brown",
  "company": "CINASTER",
  "phone": "+1 (833) 512-3475",
  "address": "741 Dare Court, Blanford, North Dakota, 957",
  "about": "Pariatur excepteur veniam nulla mollit ad. Nostrud proident reprehenderit et id excepteur. Ut ea duis non ut nostrud qui incididunt veniam veniam voluptate consectetur veniam. Pariatur officia et non nisi sunt non. Do laboris ex exercitation reprehenderit labore nisi est ut ex nostrud consectetur eu in aute.",
  "registered": "Wednesday, February 25, 2015 1:26 PM",
  "latitude": "70.049318",
  "longitude": "76.48116",
  "range": [
  0,
  1,
  2,
  3,
  4,
  5,
  6,
  7,
  8,
  9
  ],
  "children1": [
  {
    "_id": "598e09bb867548c862d35a9d",
    "index": 0,
    "guid": "82530dee-fc44-44f3-8fc9-b6247967936b",
    "isActive": false,
    "balance": "$3,676.25",
    "age": 40,
    "eyeColor": "blue",
    "company": "PLUTORQUE",
    "phone": "+1 (954) 403-3882",
    "address": "709 Corbin Place, Ellerslie, Nebraska, 2793",
    "about": "Sit ea ut dolor minim quis. Eiusmod sit minim qui esse eiusmod aliquip ut esse commodo. Mollit consequat occaecat laborum fugiat anim. Magna consectetur ullamco ipsum esse ut minim consequat nisi laborum duis deserunt reprehenderit irure adipisicing.",
    "registered": "Saturday, September 19, 2015 3:21 AM",
    "latitude": "-29.821031",
    "longitude": "-121.322123",
    "range": [
    0,
    1,
    2,
    3,
    4,
    5,
    6,
    7,
    8,
    9
    ],
    "children2": [
    {
      "_id": "598e09bb3b9b00d95074b909",
      "index": 0,
      "guid": "5f114994-b2a2-4ccc-abe1-650b3c217f08",
      "isActive": false,
      "balance": "$1,578.19",
      "age": 33,
      "eyeColor": "brown",
      "company": "VISUALIX",
      "phone": "+1 (990) 412-3327",
      "address": "983 Jaffray Street, Wadsworth, Mississippi, 109",
      "about": "Esse commodo est anim do officia minim cupidatat duis eiusmod. Eiusmod id Lorem consequat duis ipsum ut nulla nulla commodo. Laborum nostrud duis minim Lorem incididunt eiusmod. Enim anim mollit velit sint in est consectetur cillum incididunt. Elit nulla sint labore anim anim aliquip ex ad. Consectetur non ullamco dolor consequat enim. Mollit enim labore veniam deserunt amet esse consequat qui id sunt.",
      "registered": "Friday, September 16, 2016 1:03 PM",
      "latitude": "63.612983",
      "longitude": "-82.932754",
      "range": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9
      ],
      "children3": [
      {
        "_id": "598e09bb0cdabdd21ab1931b",
        "index": 0,
        "guid": "ea2b5d54-0a01-497b-a608-4fdafd66860f",
        "isActive": true,
        "balance": "$2,723.31",
        "age": 36,
        "eyeColor": "green",
        "company": "NETERIA",
        "phone": "+1 (839) 494-2194",
        "address": "730 Ovington Court, Enetai, Northern Mariana Islands, 4895",
        "about": "Laboris magna fugiat laborum ullamco irure laborum ut excepteur id ullamco do velit sit. Duis occaecat excepteur enim do eiusmod excepteur ipsum sint voluptate quis consequat minim. Commodo laboris culpa enim aute reprehenderit id Lorem quis. Exercitation proident ut officia adipisicing nulla in commodo qui officia nostrud excepteur. Reprehenderit excepteur qui excepteur aliquip id cillum nulla ad. Minim ex nulla quis officia consectetur laborum esse magna duis labore ea.",
        "registered": "Wednesday, November 11, 2015 2:19 AM",
        "latitude": "-40.94726",
        "longitude": "57.154387",
        "range": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
        ]
      }
      ]
    }
    ]
  }
  ]
},
{
  "_id": "598e09bb79b5d57d7804b0f1",
  "index": 9,
  "guid": "c9df4e0d-a3ec-4110-a12c-e2ccb5f02304",
  "isActive": false,
  "balance": "$2,334.96",
  "age": 22,
  "eyeColor": "blue",
  "company": "DYNO",
  "phone": "+1 (879) 453-3950",
  "address": "216 Hunterfly Place, Jenkinsville, New Jersey, 3773",
  "about": "Culpa ipsum nulla nostrud in ullamco commodo cupidatat eu duis veniam. Duis sunt sint elit consectetur incididunt ea ipsum dolor. Culpa cillum culpa voluptate non officia veniam ex. Labore do ullamco ut do consequat amet proident. Et officia non cillum aliquip in minim voluptate incididunt. Proident esse exercitation anim aliquip. Consequat non nisi voluptate do exercitation minim cillum est adipisicing.",
  "registered": "Monday, July 11, 2016 9:58 PM",
  "latitude": "-13.441542",
  "longitude": "-132.771385",
  "range": [
  0,
  1,
  2,
  3,
  4,
  5,
  6,
  7,
  8,
  9
  ],
  "children1": [
  {
    "_id": "598e09bb233ceab05b1afdac",
    "index": 0,
    "guid": "01368577-ab76-4c85-ab69-93023f62befb",
    "isActive": true,
    "balance": "$1,186.12",
    "age": 39,
    "eyeColor": "blue",
    "company": "ZEPITOPE",
    "phone": "+1 (990) 525-2495",
    "address": "831 Taylor Street, Dupuyer, Massachusetts, 5403",
    "about": "Fugiat quis occaecat proident voluptate voluptate qui tempor voluptate. Deserunt ad aute enim anim laborum nostrud. Aliqua anim laboris voluptate ad ut. Est ex esse ea dolore aliqua non esse. Ut nisi est velit fugiat commodo nostrud sint esse. Nisi magna cupidatat exercitation laborum consectetur dolore fugiat veniam proident proident.",
    "registered": "Friday, July 8, 2016 12:27 AM",
    "latitude": "8.863566",
    "longitude": "-14.804887",
    "range": [
    0,
    1,
    2,
    3,
    4,
    5,
    6,
    7,
    8,
    9
    ],
    "children2": [
    {
      "_id": "598e09bbf6b8f47d489a3598",
      "index": 0,
      "guid": "5044e13e-a194-4edf-b5e9-1129ed1c8516",
      "isActive": true,
      "balance": "$3,604.79",
      "age": 38,
      "eyeColor": "green",
      "company": "UTARIAN",
      "phone": "+1 (802) 590-2836",
      "address": "384 Arlington Place, Zeba, American Samoa, 5339",
      "about": "Quis sint occaecat do proident adipisicing laborum culpa aliquip voluptate laboris id. Ea ut cupidatat exercitation incididunt quis adipisicing veniam eiusmod commodo occaecat. Pariatur dolor cupidatat sint et sunt sunt aute eu exercitation. Enim cillum minim in veniam sint in minim sunt veniam sunt est nisi exercitation Lorem. Nostrud ipsum dolore fugiat ea cupidatat cillum cupidatat ipsum sint occaecat irure nisi laborum veniam.",
      "registered": "Sunday, November 22, 2015 7:42 PM",
      "latitude": "42.60033",
      "longitude": "-106.559978",
      "range": [
      0,
      1,
      2,
      3,
      4,
      5,
      6,
      7,
      8,
      9
      ],
      "children3": [
      {
        "_id": "598e09bbc897f0a0e73e7384",
        "index": 0,
        "guid": "9ee8dc5e-1f8d-4066-913c-6f0c9efe7c5a",
        "isActive": true,
        "balance": "$1,478.30",
        "age": 26,
        "eyeColor": "brown",
        "company": "GRACKER",
        "phone": "+1 (874) 564-3083",
        "address": "778 Dank Court, Colton, Michigan, 7729",
        "about": "Lorem proident eu labore elit dolore commodo excepteur enim quis cupidatat. Ipsum proident mollit exercitation excepteur fugiat consequat dolore minim. Ea elit ea nulla incididunt. Minim ex dolore id et ut excepteur cupidatat aliquip sit id quis amet id. Proident laborum fugiat occaecat deserunt occaecat incididunt officia tempor id culpa dolore. Labore cillum aute eiusmod ea consectetur aliqua consequat. Proident consequat non dolor dolore esse.",
        "registered": "Saturday, August 16, 2014 9:55 PM",
        "latitude": "50.800234",
        "longitude": "-37.681619",
        "range": [
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9
        ]
      }
      ]
    }
    ]
  }
  ]
}
];

function createTable(dataSet, childKeys, numOfLayers) {
  let headers = Object.keys(dataSet[0]);
  headers = headers.filter((key) => {
    return !childKeys.includes(key);
  });
  headers.forEach((key) => {
    $("#headers").append(`
      <th>${key}</th>
      `);
  })
  dataSet.forEach((datum, index) => {
    let keys = Object.keys(datum);
    keys = keys.filter((key) => {
      return !childKeys.includes(key);
    });
    //add table row
    $("#body").append(`
      <tr id="row_${index}">
      </tr>
      `);
    //add table data for given row
    keys.forEach((key, keyIndex) => {
      if (keyIndex === 0) {
        $(`#row_${index}`).append(`
          <td><i onclick="toggleExpandable(${index}, 0, ${numOfLayers})" class="fa fa-caret-right"></i>${datum[key]}</td>
          `);
      } else {
        $(`#row_${index}`).append(`
          <td>${datum[key]}</td>
          `);
      }
    });
    buildChildExpandables(currentLayer = 0, index, datum[childKeys[currentLayer]], childKeys);
  });
}

function buildChildExpandables (currentLayer, index, childArray, childKeys) {
  if (childArray) {
    childArray.forEach((child) => {
      let expandableKeys = Object.keys(child);
      expandableKeys = expandableKeys.filter((key) => {
        return !childKeys.includes(key);
      });

      $(`#body`).append(`
        <tr class="expandable" id="expandable_row${index}_layer${currentLayer}"></tr>
        `);

      expandableKeys.forEach((key, keyIndex) => {
        if (keyIndex === 0) {
          $(`#expandable_row${index}_layer${currentLayer}`).append(`
            <td><i onclick="toggleExpandable(${index}, ${currentLayer + 1}, ${childKeys.length})" style="margin-left: ${(currentLayer + 1)*15}px;" class="fa fa-caret-right"></i>${child[key]}</td>
            `);
        } else {
          $(`#expandable_row${index}_layer${currentLayer}`).append(`
            <td>${child[key]}</td>
            `);
        }
      });

      let currentChildKey = Object.keys(child).filter((key) => {
        return childKeys.includes(key);
      })[0];
      childArray = child[currentChildKey];
      if (childArray) {
        currentLayer += 1;
        buildChildExpandables(currentLayer, index, childArray, childKeys);
      }
    });
  }
}

function toggleExpandable (rowId, layer, numOfLayers) {
  for (let i = 0; i < numOfLayers; i++) {
    if (i === layer) {
      $("#expandable_row" + rowId + '_layer' + layer).toggle();
    }
    let el = $("#expandable_row" + rowId + '_layer' + i);
    if (i > layer && el.is(":visible")) {
      el.toggle();
    }
  }
}

$('tbody').scroll(function (e) {
    $('thead').css("left", -$("tbody").scrollLeft()); //fix the thead relative to the body scrolling
    $('thead th:nth-child(1)').css("left", $("tbody").scrollLeft()); //fix the first cell of the header
    $('tbody td:nth-child(1)').css("left", $("tbody").scrollLeft()); //fix the first column of tdbody
  });

createTable(dataSet, childKeys, numOfLayers);
